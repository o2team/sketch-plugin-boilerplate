{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./node_modules/mocha-js-delegate/index.js","webpack://exports/./src/action.js","webpack://exports/./src/state.js","webpack://exports/./src/utils/element.js","webpack://exports/./src/utils/file.js","webpack://exports/./src/utils/index.js","webpack://exports/./src/utils/selector.js","webpack://exports/./src/utils/system.js","webpack://exports/external \"sketch\""],"names":["autoSidePanelCommand","context","objectID","document","actionContext","MSDocument","currentDocument","documentData","IdentifierPrefix","SidePanelIdentifier","isShow","getSettingForKey","toggleSidePanelCommand","command","pluginBundle","commands","AppController","sharedInstance","runPluginCommand_fromMenu_context","onOpenDocument","setTimeout","bind","onSelectionChanged","onCloseDocument","COScript","currentCOScript","setShouldKeepAround","version","sketchVersion","pluginFolderPath","resourcesPath","documentObjectID","SidePanelViewIdentifier","WINDOW_MOVE_INSTANCE","WINDOW_MOVE_SELECTOR","Menus","updateIdentifier","rect","NSMakeRect","size","NSMakeSize","icon","activeIcon","tooltip","identifier","wkIdentifier","type","inGravityType","url","getPluginFolderPath","split","scriptPath","splice","join","ctx","String","plugin","toString","sketch","getImageURL","name","isRetinaDisplay","NSScreen","mainScreen","backingScaleFactor","suffix","pluginSketch","imageURL","URLByAppendingPathComponent","createImage","Image","NSImage","alloc","initWithContentsOfURL","setSize","setScalesWhenResized","createImageView","imageView","NSImageView","initWithFrame","image","setImage","setAutoresizingMask","createBoxSeparator","separtorBox","NSBox","NSZeroRect","setBoxType","NSBoxSeparator","setBorderColor","NSColor","colorWithHex","colorWithSRGBRed_green_blue_alpha","error","console","addButton","callAction","button","NSButton","init","setFont","NSFont","fontWithName_size","activeImageURL","activeImage","setAlternateImage","setBordered","sizeToFit","setToolTip","setButtonType","NSMomentaryChangeButton","setCOSJSTargetFunction","setAction","removeBadge","hasBadge","createBounds","x","y","width","height","createPanel","options","minWidth","minHeight","title","vibrancy","threadDictionary","NSThread","mainThread","mainScreenRect","screens","firstObject","frame","Bounds","Math","round","NSWidth","NSHeight","panel","NSPanel","setFrame_display","setOpaque","setStyleMask","NSWindowStyleMaskFullSizeContentView","NSBorderlessWindowMask","NSResizableWindowMask","NSTexturedBackgroundWindowMask","NSTitledWindowMask","NSClosableWindowMask","NSFullSizeContentViewWindowMask","NSWindowStyleMaskResizable","setBackgroundColor","whiteColor","windowBackgroundColor","movableByWindowBackground","titlebarAppearsTransparent","titleVisibility","NSWindowTitleHidden","center","makeKeyAndOrderFront","setLevel","NSFloatingWindowLevel","minSize","standardWindowButton","NSWindowZoomButton","setHidden","NSWindowMiniaturizeButton","NSWindowCloseButton","setEnabled","NSWindowFullScreenButton","showsToolbarButton","effectView","NSVisualEffectView","setMaterial","NSVisualEffectMaterialPopover","NSViewWidthSizable","NSViewHeightSizable","setAppearance","NSAppearance","appearanceNamed","NSAppearanceNameVibrantLight","setBlendingMode","NSVisualEffectBlendingModeBehindWindow","contentView","addSubview","closeButton","sender","log","close","removeObjectForKey","createView","view","NSView","setFlipped","createBox","box","setTitle","createTextField","string","field","NSTextField","setStringValue","systemFontOfSize","setTextColor","colorWithCalibratedRed_green_blue_alpha","setBezeled","setEditable","File","fileManager","NSFileManager","defaultManager","_stringify","jsonData","opt","nsJson","NSJSONSerialization","dataWithJSONObject_options_error_","nil","NSString","initWithData_encoding","writeFile","content","path","stringWithFormat","writeToFile_atomically_encoding_error_","copyFile","dist","fileExistsAtPath","copyItemAtPath_toPath_error","mkDir","createDirectoryAtPath_withIntermediateDirectories_attributes_error_","readJSON","src","NSData","dataWithContentsOfFile","JSONObjectWithData_options_error","patch","attributesOfItemAtPath_error","NSFileSize","e","renameFile","from","to","moveItemAtPath_toPath_error","exist","readDir","contentsOfDirectoryAtPath_error_","removeDir","removeItemAtPath_error","getTempDirPath","URL","URLsForDirectory_inDomains","lastObject","hash","Date","now","nsString","mkTempDir","saveImage","tiffData","TIFFRepresentation","p","NSBitmapImageRep","imageRepWithData","data","representationUsingType_properties","NSPNGFileType","writeToFile_atomically","jsonFilePaths","filename","ds","enumeratorAtPath","paths","nextObject","pathExtension","push","getSketchSelected","Document","getSelectedDocument","page","selectedPage","artboard","Artboard","fromNative","_object","currentArtboard","selection","selectedLayers","getSelected","currentPage","artboards","selectedArtboard","getScriptExecPath","getDocumentID","getDocumentPath","fileURL","getDocumentName","lastPathComponent","dumpLayer","sketchObject","treeAsDictionary","nsData","initWithData_encoding_","dumpSymbol","symbolInstance","immutableInstance","immutableModelObject","MSJSONDataArchiver","archiveStringWithRootObject_error","penUrlInBrowser","NSWorkspace","sharedWorkspace","openURL","NSURL","URLWithString","getNewUUID","NSUUID","UUID","UUIDString","getThreadDictForKey","key","setThreadDictForKey","value","removeThreadDictForKey","NSUserDefaults","standardUserDefaults","objectForKey","setSettingForKey","setObject_forKey","removeSettingForKey","showPluginsPane","MSPluginsPreferencePane","preferencesController","MSPreferencesController","sharedController","switchToPaneWithIdentifier","currentPreferencePane","tableView","reloadData","showLibrariesPane","MSAssetLibrariesPreferencePane","getSystemVersion","systemVersion","NSProcessInfo","processInfo","operatingSystemVersionString","match","versions","length","concat","getPluginVersion","reloadPlugins","pluginManager","getFileContentFromModal","fileTypes","openPanel","NSOpenPanel","canCreateDirectories","canChooseFiles","allowedFileTypes","openPanelButtonPressed","runModal","NSModalResponseOK","filePath","stringWithContentsOfFile_encoding_error","NSUTF8StringEncoding","getSavePathFromModal","fileName","savePanel","NSSavePanel","nameFieldStringValue","savePanelActionStatus","observerWindowResizeNotification","fn","Selector","NSSelectorFromString","delegate","MochaJSDelegate","notification","delegateInstance","getClassInstance","NSNotificationCenter","defaultCenter","addObserver_selector_name_object","NSWindowDidResizeNotification","removeObserverWindowResizeNotification","removeObserver_name_object"],"mappings":";;;;;;;;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;AClFA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc,wDAAwD,EAAE;AACxE;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,uCAAuC;AACvC;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;AC/FA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAEA,IAAMA,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAAC,OAAO,EAAI;AACtC,MAAMC,QAAQ,GAAG,CAACD,OAAO,CAACE,QAAR,IAAoBF,OAAO,CAACG,aAAR,CAAsBD,QAA1C,IAAsDE,UAAU,CAACC,eAAX,EAAvD,EAAqFC,YAArF,GAAoGL,QAApG,EAAjB;AACA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","file":"action.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/action.js\");\n","/* globals MOClassDescription, NSObject, NSSelectorFromString, NSClassFromString, MOPropertyDescription */\n\nmodule.exports = function MochaDelegate(definition, superclass) {\n  var uniqueClassName =\n    'MochaJSDelegate_DynamicClass_' + NSUUID.UUID().UUIDString()\n\n  var delegateClassDesc = MOClassDescription.allocateDescriptionForClassWithName_superclass_(\n    uniqueClassName,\n    superclass || NSObject\n  )\n\n  // Storage\n  var handlers = {}\n  var ivars = {}\n\n  // Define an instance method\n  function setHandlerForSelector(selectorString, func) {\n    var handlerHasBeenSet = selectorString in handlers\n    var selector = NSSelectorFromString(selectorString)\n\n    handlers[selectorString] = func\n\n    /*\n      For some reason, Mocha acts weird about arguments: https://github.com/logancollins/Mocha/issues/28\n      We have to basically create a dynamic handler with a likewise dynamic number of predefined arguments.\n    */\n    if (!handlerHasBeenSet) {\n      var args = []\n      var regex = /:/g\n      while (regex.exec(selectorString)) {\n        args.push('arg' + args.length)\n      }\n\n      // eslint-disable-next-line no-eval\n      var dynamicFunction = eval(\n        '(function (' +\n          args.join(', ') +\n          ') { return handlers[selectorString].apply(this, arguments); })'\n      )\n\n      delegateClassDesc.addInstanceMethodWithSelector_function(\n        selector,\n        dynamicFunction\n      )\n    }\n  }\n\n  // define a property\n  function setIvar(key, value) {\n    var ivarHasBeenSet = key in handlers\n\n    ivars[key] = value\n\n    if (!ivarHasBeenSet) {\n      delegateClassDesc.addInstanceVariableWithName_typeEncoding(key, '@')\n      var description = MOPropertyDescription.new()\n      description.name = key\n      description.typeEncoding = '@'\n      description.weak = true\n      description.ivarName = key\n      delegateClassDesc.addProperty(description)\n    }\n  }\n\n  this.getClass = function() {\n    return NSClassFromString(uniqueClassName)\n  }\n\n  this.getClassInstance = function(instanceVariables) {\n    var instance = NSClassFromString(uniqueClassName).new()\n    Object.keys(ivars).forEach(function(key) {\n      instance[key] = ivars[key]\n    })\n    Object.keys(instanceVariables || {}).forEach(function(key) {\n      instance[key] = instanceVariables[key]\n    })\n    return instance\n  }\n  // alias\n  this.new = this.getClassInstance\n\n  // Convenience\n  if (typeof definition === 'object') {\n    Object.keys(definition).forEach(\n      function(key) {\n        if (typeof definition[key] === 'function') {\n          setHandlerForSelector(key, definition[key])\n        } else {\n          setIvar(key, definition[key])\n        }\n      }\n    )\n  }\n\n  delegateClassDesc.registerClass()\n}\n","import { getSettingForKey } from './utils'\n\nconst autoSidePanelCommand = context => {\n  const objectID = (context.document || context.actionContext.document || MSDocument.currentDocument()).documentData().objectID()\n  const IdentifierPrefix = objectID ? `sketch-plugin-boilerplate-${objectID}` : 'sketch-plugin-boilerplate'\n  const SidePanelIdentifier = `${IdentifierPrefix}-side-panel`\n  const isShow = getSettingForKey(SidePanelIdentifier)\n\n  if (isShow) {\n    const toggleSidePanelCommand = context.command.pluginBundle().commands()['sketch-plugin-boilerplate.toggle-side-panel']\n    context.command = toggleSidePanelCommand\n    AppController.sharedInstance().runPluginCommand_fromMenu_context(\n      toggleSidePanelCommand,\n      false,\n      context\n    )\n  }\n}\n\nexport const onOpenDocument = context => {\n  setTimeout(autoSidePanelCommand.bind(null, context), 100)\n}\n\nexport const onSelectionChanged = () => {\n\n}\n\nexport const onCloseDocument = () => {\n  COScript.currentCOScript().setShouldKeepAround(false)\n}\n","import sketch from 'sketch'\n\nexport let context\nexport let document\nexport let version\nexport let sketchVersion\nexport let pluginFolderPath\nexport let resourcesPath\nexport let documentObjectID\nexport let IdentifierPrefix\nexport let SidePanelIdentifier\nexport let SidePanelViewIdentifier\nexport let WINDOW_MOVE_INSTANCE\nexport let WINDOW_MOVE_SELECTOR\nexport let Menus\n\nfunction updateIdentifier (objectID) {\n  IdentifierPrefix = objectID ? `sketch-plugin-boilerplate-${objectID}` : 'sketch-plugin-boilerplate'\n  SidePanelIdentifier = `${IdentifierPrefix}-side-panel`\n  SidePanelViewIdentifier = `${IdentifierPrefix}-side-panel-view`\n  WINDOW_MOVE_INSTANCE = `window-move-instance-${objectID}`\n  WINDOW_MOVE_SELECTOR = `window-move-selector-${objectID}`\n  Menus = [\n    {\n      rect: NSMakeRect(0, 0, 40, 40),\n      size: NSMakeSize(24, 24),\n      icon: 'artboard',\n      activeIcon: 'artboard-active',\n      tooltip: '上传画板',\n      identifier: `${IdentifierPrefix}-menu.artboard`,\n      wkIdentifier: `${IdentifierPrefix}-webview.artboard`,\n      type: 2,\n      inGravityType: 1,\n      url: 'https://aotu.io',\n    },\n    {\n      rect: NSMakeRect(0, 0, 40, 40),\n      size: NSMakeSize(24, 24),\n      icon: 'icon',\n      activeIcon: 'icon-active',\n      tooltip: '图标',\n      identifier: `${IdentifierPrefix}-menu.icon`,\n      wkIdentifier: `${IdentifierPrefix}-webview.icon`,\n      type: 2,\n      inGravityType: 1,\n      url: 'https://docs.pfan123.com/',\n    },\n    {\n      rect: NSMakeRect(0, 0, 40, 40),\n      size: NSMakeSize(24, 24),\n      icon: 'component',\n      activeIcon: 'component-active',\n      tooltip: '组件',\n      identifier: `${IdentifierPrefix}-menu.component`,\n      wkIdentifier: `${IdentifierPrefix}-webview.component`,\n      type: 2,\n      inGravityType: 1,\n      url: 'https://m.baidu.com/',\n    },\n    {\n      rect: NSMakeRect(0, 0, 40, 40),\n      size: NSMakeSize(24, 24),\n      icon: 'palette',\n      activeIcon: 'palette-active',\n      tooltip: '调色板',\n      identifier: `${IdentifierPrefix}-menu.palette`,\n      wkIdentifier: `${IdentifierPrefix}-webview.palette`,\n      type: 2,\n      inGravityType: 1,\n      url: 'https://aotu.io/',\n    },\n    {\n      rect: NSMakeRect(0, 0, 40, 40),\n      size: NSMakeSize(24, 24),\n      icon: 'fill',\n      activeIcon: 'fill-active',\n      tooltip: '填充',\n      identifier: `${IdentifierPrefix}-menu.fill`,\n      wkIdentifier: `${IdentifierPrefix}-webview.fill`,\n      type: 2,\n      inGravityType: 1,\n      url: 'https://aotu.io/',\n    },\n    {\n      rect: NSMakeRect(0, 0, 40, 40),\n      size: NSMakeSize(24, 24),\n      icon: 'help',\n      activeIcon: 'help-active',\n      tooltip: '帮助中心',\n      identifier: `${IdentifierPrefix}-menu.help`,\n      wkIdentifier: `${IdentifierPrefix}-webview.help`,\n      type: 2,\n      inGravityType: 3,\n      url: 'https://aotu.io/',\n    },\n    {\n      rect: NSMakeRect(0, 0, 40, 40),\n      size: NSMakeSize(24, 24),\n      icon: 'setting',\n      activeIcon: 'setting-active',\n      tooltip: '设置',\n      identifier: `${IdentifierPrefix}-menu.setting`,\n      wkIdentifier: `${IdentifierPrefix}-webview.setting`,\n      type: 2,\n      inGravityType: 3,\n      url: 'https://aotu.io/',\n    }\n  ]\n}\n\nfunction getPluginFolderPath (context) {\n  // Get absolute folder path of plugin\n  const split = context.scriptPath.split('/')\n  split.splice(-3, 3)\n  return split.join('/')\n}\n\nexport default function (ctx) {\n  context = ctx\n  document = context.document || context.actionContext.document || MSDocument.currentDocument()\n  documentObjectID = document.documentData().objectID()\n  updateIdentifier(documentObjectID)\n  // eslint-disable-next-line no-new-wrappers\n  version = new String(context.plugin.version()).toString()\n  //Sketch 66 已移除 context.api()  Javascript API (v1.0)\n  // sketchVersion = new String(context.api().version).toString()\n  // eslint-disable-next-line no-new-wrappers\n  sketchVersion = new String(sketch.version.sketch).toString()\n  pluginFolderPath = getPluginFolderPath(context)\n  resourcesPath = `${pluginFolderPath}/Contents/Resources`\n}\n","import { context } from '../state'\n\n/**\n * getImageURL 获取 icon 路径\n * @param {*} name\n */\nexport const getImageURL = name => {\n  const isRetinaDisplay = NSScreen.mainScreen().backingScaleFactor() > 1\n  const suffix = isRetinaDisplay ? '@2x' : ''\n  const pluginSketch = context.plugin.url()\n  const imageURL = pluginSketch\n    .URLByAppendingPathComponent('Contents')\n    .URLByAppendingPathComponent('Resources')\n    .URLByAppendingPathComponent('icons')\n    .URLByAppendingPathComponent(`${name + suffix}.png`)\n  return imageURL\n}\n\n/**\n * createImage 创建 NSImage\n * @param {*} imageURL\n * @param {*} size\n */\nexport const createImage = (imageURL, size) => {\n  // NSImage.alloc().initWithSize([width, height])\n  const Image = NSImage.alloc().initWithContentsOfURL(imageURL)\n  size && Image.setSize(size)\n  Image.setScalesWhenResized(true)\n  return Image\n}\n\n/**\n * createImageView 创建 NSImageView\n * @param {*} rect\n * @param {*} icon\n * @param {*} size\n */\nexport const createImageView = (rect, icon, size) => {\n  const imageView = NSImageView.alloc().initWithFrame(rect)\n  const imageURL = getImageURL(icon)\n  const image = createImage(imageURL, size)\n  imageView.setImage(image)\n  imageView.setAutoresizingMask(5)\n  return imageView\n}\n\n/**\n * createImageView 创建 NSBoxSeparator\n */\nexport const createBoxSeparator = () => {\n  // set to 0 in width and height\n  const separtorBox = NSBox.alloc().initWithFrame(NSZeroRect)\n  // Specifies that the box is a separator\n  separtorBox.setBoxType(2 || NSBoxSeparator)\n  separtorBox.setBorderColor(NSColor.colorWithHex('#F5F5F5'))\n  try {\n    separtorBox.setBorderColor(NSColor.colorWithSRGBRed_green_blue_alpha(1.0, 1.0, 1.0, 1.0))\n  } catch (error) {\n    console.error(error)\n  }\n\n  // separtorBox.setTransparent(true)\n  return separtorBox\n}\n\n/**\n * addButton 创建 NSButton\n * @param {*} param { rect, size, icon, activeIcon, tooltip = '', type = 5, callAction }\n */\nexport const addButton = ({ rect, size, icon, activeIcon, tooltip = '', type = 5, callAction }) => {\n  const button = rect ? NSButton.alloc().initWithFrame(rect) : NSButton.alloc().init()\n  const imageURL = getImageURL(icon)\n  const image = createImage(imageURL, size)\n  button.setImage(image)\n  // button.setTitle(tooltip)\n  button.setFont(NSFont.fontWithName_size('Arial', 10))\n\n  if (activeIcon) {\n    const activeImageURL = getImageURL(activeIcon)\n    const activeImage = createImage(activeImageURL, size)\n    button.setAlternateImage(activeImage)\n  } else {\n    button.setAlternateImage(image)\n  }\n  button.setBordered(false)\n  button.sizeToFit()\n  button.setToolTip(tooltip)\n  button.setButtonType(type || NSMomentaryChangeButton)\n  button.setCOSJSTargetFunction(callAction)\n  button.setAction('callAction:')\n  button.removeBadge = () => {\n    button.setImage(image)\n    button.hasBadge = false\n  }\n  button.icon = icon\n  return button\n}\n\n/**\n * 创建 bounds\n * @param {*} x\n * @param {*} y\n * @param {*} width\n * @param {*} height\n */\nexport const createBounds = (x = 0, y = 0, width = 0, height = 0) => NSMakeRect(\n  x,\n  y,\n  width,\n  height\n)\n\n/**\n * createView 创建 NSPanel\n * @param {*} frame  options\n */\nexport const createPanel = (options = {\n  width: 800,\n  height: 600,\n  minWidth: 0,\n  minHeight: 0,\n  x: 0,\n  y: 0,\n  title: 'panel',\n  identifier: 'sketch-panel',\n  vibrancy: true,\n}) => {\n  COScript.currentCOScript().setShouldKeepAround(true)\n\n  const threadDictionary = NSThread.mainThread().threadDictionary()\n  const mainScreenRect = NSScreen.screens()\n    .firstObject()\n    .frame()\n\n  const Bounds = NSMakeRect(\n    options.x ? options.x : Math.round((NSWidth(mainScreenRect) - options.width) / 2),\n    options.y ? NSHeight(mainScreenRect) - options.y : Math.round((NSHeight(mainScreenRect) - options.height) / 2),\n    options.width,\n    options.height\n  )\n  const panel = NSPanel.alloc().init()\n  panel.setFrame_display(Bounds, true)\n  panel.setOpaque(0)\n  threadDictionary[options.identifier] = panel\n\n  // NSWindowStyleMaskDocModalWindow 直角\n  panel.setStyleMask(NSWindowStyleMaskFullSizeContentView | NSBorderlessWindowMask | NSResizableWindowMask | NSTexturedBackgroundWindowMask | NSTitledWindowMask | NSClosableWindowMask | NSFullSizeContentViewWindowMask | NSWindowStyleMaskResizable)\n  panel.setBackgroundColor(NSColor.whiteColor() || NSColor.windowBackgroundColor())\n\n  panel.title = options.title\n  panel.movableByWindowBackground = true\n  panel.titlebarAppearsTransparent = true\n  panel.titleVisibility = NSWindowTitleHidden\n\n  panel.center()\n  panel.makeKeyAndOrderFront(null)\n  panel.setLevel(NSFloatingWindowLevel)\n  panel.minSize = NSMakeSize(options.minWidth, options.minHeight)\n\n  panel.standardWindowButton(NSWindowZoomButton).setHidden(true)\n  panel.standardWindowButton(NSWindowMiniaturizeButton).setHidden(true)\n  panel.standardWindowButton(NSWindowCloseButton).setHidden(true)\n\n  // Some third-party macOS utilities check the zoom button's enabled state to\n  // determine whether to show custom UI on hover, so we disable it here to\n  // prevent them from doing so in a frameless app window.\n  panel.standardWindowButton(NSWindowZoomButton).setEnabled(false)\n\n  // The fullscreen button should always be hidden for frameless window.\n  if (panel.standardWindowButton(NSWindowFullScreenButton)) {\n    panel.standardWindowButton(NSWindowFullScreenButton).setHidden(true)\n  }\n\n  panel.showsToolbarButton = false\n  panel.movableByWindowBackground = true\n\n  if (options.vibrancy) {\n    // Create the blurred background\n    const effectView = NSVisualEffectView.alloc().initWithFrame(NSMakeRect(0, 0, options.width, options.height))\n    effectView.setMaterial(NSVisualEffectMaterialPopover)\n    effectView.setAutoresizingMask(NSViewWidthSizable | NSViewHeightSizable)\n    effectView.setAppearance(NSAppearance.appearanceNamed(NSAppearanceNameVibrantLight))\n    effectView.setBlendingMode(NSVisualEffectBlendingModeBehindWindow)\n\n    // Add it to the panel\n    panel.contentView().addSubview(effectView)\n  }\n\n  const closeButton = panel.standardWindowButton(NSWindowCloseButton)\n  closeButton.setCOSJSTargetFunction(sender => {\n    log(sender)\n\n    panel.close()\n\n    // Remove the reference to the panel\n    threadDictionary.removeObjectForKey(options.identifier)\n\n    // Stop this Long-running script\n    COScript.currentCOScript().setShouldKeepAround(false)\n  })\n  return panel\n}\n\n/**\n * createView 创建 NSView\n * @param {*} frame  NSMakeRect(0, 0, 40, 40)\n */\nexport const createView = frame => {\n  const view = NSView.alloc().initWithFrame(frame)\n  view.setFlipped(1)\n  return view\n}\n\n/**\n * createBox 创建 NSBox\n * @param {*} frame  NSMakeRect(0, 0, 40, 40)\n */\nexport const createBox = frame => {\n  const box = NSBox.alloc().initWithFrame(frame)\n  box.setTitle('')\n  return box\n}\n\n\n/**\n * createBox 创建 createTextField\n * @param {*} string\n * @param {*} frame NSMakeRect(0, 0, 40, 40)\n */\nexport const createTextField = (string, frame) => {\n  const field = NSTextField.alloc().initWithFrame(frame)\n\n  field.setStringValue(string)\n  field.setFont(NSFont.systemFontOfSize(12))\n  field.setTextColor(\n    NSColor.colorWithCalibratedRed_green_blue_alpha(0, 0, 0, 0.7)\n  )\n  field.setBezeled(0)\n  field.setBackgroundColor(NSColor.windowBackgroundColor())\n  field.setEditable(0)\n\n  return field\n}\n\n","/**\n * File 文件操作\n * NSString.stringWithFormat('%@', content)\n */\n\nexport const File = {\n  fileManager: NSFileManager.defaultManager(),\n\n  _stringify (jsonData, opt) {\n    opt = opt ? 1 : 0\n    const nsJson = NSJSONSerialization.dataWithJSONObject_options_error_(jsonData, opt, nil)\n    return NSString.alloc().initWithData_encoding(nsJson, 4)\n  },\n\n  writeFile (content, path) {\n    content = NSString.stringWithFormat('%@', content)\n    path = NSString.stringWithFormat('%@', path)\n    return content.writeToFile_atomically_encoding_error_(path, !0, 4, nil)\n  },\n\n  copyFile (path, dist) {\n    return this.fileManager.fileExistsAtPath(path) ? this.fileManager.copyItemAtPath_toPath_error(path, dist, nil) : nil\n  },\n\n  mkDir (path) {\n    return !this.fileManager.fileExistsAtPath(path) && this.fileManager.createDirectoryAtPath_withIntermediateDirectories_attributes_error_(path, !0, nil, nil)\n  },\n\n  readJSON (path, opt) {\n    const src = NSData.dataWithContentsOfFile(path)\n    const options = !0 === opt ? 1 : 0\n    return NSJSONSerialization.JSONObjectWithData_options_error(src, options, nil)\n  },\n\n  size (patch) {\n    let size = 0\n    try {\n      size = this.fileManager.attributesOfItemAtPath_error(patch, nil).NSFileSize\n    } catch (e) {\n      size = 0\n    }\n    return size\n  },\n\n  renameFile (from, to) {\n    this.fileManager.fileExistsAtPath(from) && this.fileManager.moveItemAtPath_toPath_error(from, to, null)\n  },\n\n  exist (path) {\n    return !!this.fileManager.fileExistsAtPath(path)\n  },\n\n  readDir (path) {\n    return !!this.fileManager.fileExistsAtPath(path) && this.fileManager.contentsOfDirectoryAtPath_error_(path, nil)\n  },\n\n  removeDir (path) {\n    this.fileManager.removeItemAtPath_error(path, null)\n  },\n\n  getTempDirPath () {\n    const URL = this.fileManager.URLsForDirectory_inDomains(13, 1).lastObject()\n    const hash = Date.now() / 1e3\n    const nsString = NSString.stringWithFormat('%@', hash)\n    return URL.URLByAppendingPathComponent(nsString).path()\n  },\n\n  mkTempDir (path) {\n    const URL = this.getTempDirPath(path)\n    return this.mkDir(URL) || URL\n  },\n\n  /**\n   * @param {String} image\n   * @param {MSImageData} image\n   */\n  saveImage (path, image) {\n    const tiffData = image.TIFFRepresentation()\n    const p = NSBitmapImageRep.imageRepWithData(tiffData)\n    const data = p.representationUsingType_properties(NSPNGFileType, null)\n    data.writeToFile_atomically(path, !0)\n  },\n\n  jsonFilePaths (path) {\n    let filename\n    const ds = this.fileManager.enumeratorAtPath(path)\n    const paths = []\n    // eslint-disable-next-line no-cond-assign\n    while (filename = ds.nextObject()) {\n      if (filename.pathExtension() == 'json') {\n        paths.push(filename)\n      }\n    }\n\n    return paths\n  }\n}\n","export * from './element'\nexport * from './selector'\nexport * from './system'\nexport * from './file'\n","import { context } from '../state'\nimport sketch from 'sketch'\n\n\n/**\n * getSketchSelected 获取当前选择的 document， page， selection\n */\nexport const getSketchSelected = () => {\n  const Document = sketch.Document\n  const document = Document.getSelectedDocument() // 当前被选择的 document\n  const page = document.selectedPage // 当前被选择的 page\n  const artboard = sketch.Artboard.fromNative(page._object.currentArtboard())\n  const selection = document.selectedLayers // 当前选择图层\n\n  return {\n    document,\n    page,\n    artboard,\n    selection,\n  }\n}\n\n\n/**\n * getSelected 获取当前 document、page、artboard、selection\n */\nexport const getSelected = () => {\n  const document = context.document // 获取 sketch 当前 document\n  const plugin = context.plugin\n  const command = context.command\n  const page = document.currentPage() // 当前被选择的 page\n  const artboards = page.artboards() // 所有的画板\n  const selectedArtboard = page.currentArtboard() // 当前被选择的画板\n  const selection = context.selection // 当前选择图层\n\n  return {\n    document,\n    plugin,\n    command,\n    page,\n    artboards,\n    selectedArtboard,\n    selection,\n  }\n}\n\n\n/**\n * 获取当前脚本执行路径\n * @param {*} context\n */\nexport const getScriptExecPath = context => context.scriptPath\n\n/**\n * document 获取所选择 document objectID\n */\nexport const getDocumentID = () => context.document.documentData().objectID()\n\n/**\n * getDocumentPath 获取所选择 document 路径\n */\nexport const getDocumentPath = () => {\n  const Document = context.document\n  return Document.fileURL() ? Document.fileURL().path() : nil\n}\n\n/**\n * getDocumentName 获取所选择 document name\n */\nexport const getDocumentName = () => (getDocumentPath(context) ? getDocumentPath(context).lastPathComponent() : nil)\n\n\n/**\n * dumpLayer 导出json数据\n * @param {*} sketchObject  如 context.document.currentPage()\n */\nexport const dumpLayer = sketchObject => {\n  // return NSDictionary\n  const jsonData = sketchObject.treeAsDictionary()\n  const nsData = NSJSONSerialization.dataWithJSONObject_options_error_(jsonData, 0, nil)\n  return NSString.alloc().initWithData_encoding_(nsData, 4)\n}\n\n/**\n * dumpSymbol 导出json数据\n * @param {*} symbolInstance // context.selection[0]\n */\nexport const dumpSymbol = symbolInstance => {\n  // return symbolInstance\n  const immutableInstance = symbolInstance.immutableModelObject()\n  return MSJSONDataArchiver.archiveStringWithRootObject_error(immutableInstance, nil)\n}\n","import MochaJSDelegate from 'mocha-js-delegate'\nimport { context, WINDOW_MOVE_INSTANCE, WINDOW_MOVE_SELECTOR } from '../state'\n\n\n/**\n * openUrlInBrowser 浏览器打开链接\n * @param {string} url\n */\nexport const penUrlInBrowser = url => {\n  NSWorkspace.sharedWorkspace().openURL(NSURL.URLWithString(url))\n}\n\n/**\n * getNewUUID 获取唯一 ID\n */\nexport const getNewUUID = () => NSUUID.UUID().UUIDString()\n\n/**\n * getThreadDictForKey 获取挂载 mainThread 的键值\n * @param {string} key\n */\nexport const getThreadDictForKey = key => NSThread.mainThread().threadDictionary()[key]\n\n/**\n * setThreadDictForKey 挂载到 mainThread 的键值\n * @param {string} key\n * @param {string} value\n */\nexport const setThreadDictForKey = (key, value) => NSThread.mainThread().threadDictionary()[key] = value\n\n/**\n * removeThreadDictForKey 移除挂载到 mainThread 的键值\n * @param { string } key\n */\nexport const removeThreadDictForKey = key => {\n  if (NSThread.mainThread().threadDictionary()[key]) NSThread.mainThread().threadDictionary().removeObjectForKey(key)\n}\n\n/**\n * getSettingForKey 获取挂载 NSUserDefaults 的键值\n * @param { string } key\n */\nexport const getSettingForKey = key => NSUserDefaults.standardUserDefaults().objectForKey(key)\n\n/**\n * setSettingForKey 挂载到 NSUserDefaults 的键值\n * @param {string} key\n * @param {string} value\n */\nexport const setSettingForKey = (key, value) => NSUserDefaults.standardUserDefaults().setObject_forKey(value, key)\n\n/**\n * removeSettingForKey 移除挂载到 NSUserDefaults 的键值\n * @param { string } key\n */\nexport const removeSettingForKey = key => {\n  setSettingForKey(key, nil)\n}\n\n/**\n * showPluginsPane 显示 plugin window\n */\nexport const showPluginsPane = () => {\n  const identifier = MSPluginsPreferencePane.identifier()\n  const preferencesController = MSPreferencesController.sharedController()\n  preferencesController.switchToPaneWithIdentifier(identifier)\n  preferencesController.currentPreferencePane().tableView().reloadData()\n}\n\n/**\n * showLibrariesPane 显示 libraries window\n */\nexport const showLibrariesPane = () => {\n  const identifier = MSAssetLibrariesPreferencePane.identifier()\n  const preferencesController = MSPreferencesController.sharedController()\n  preferencesController.switchToPaneWithIdentifier(identifier)\n  preferencesController.currentPreferencePane().tableView().reloadData()\n}\n\n/**\n * getSystemVersion 获取系统版本\n */\nexport const getSystemVersion = () => {\n  try {\n    const systemVersion = NSProcessInfo.processInfo().operatingSystemVersionString().match(/\\d*\\.\\d*(\\.\\d*)?/)\n    if (systemVersion && systemVersion[0]) {\n      const versions = systemVersion[0]\n      return versions.split('.').length === 2 ? ''.concat(versions, '.0') : versions\n    }\n    return '0.0.0'\n  } catch (e) {\n    return '0.0.0'\n  }\n}\n\n/**\n * getPluginVersion 获取插件版本\n */\nexport const getPluginVersion = () => context.plugin.version()\n\n/**\n * reloadPlugins 重载插件\n */\nexport const reloadPlugins = () => {\n  AppController.sharedInstance().pluginManager().reloadPlugins()\n}\n\n/**\n * getFileContentFromModal 打开文件选择器，获取文件的文本内容\n * @param {Array<string>} fileTypes 文件类型\n */\nexport const getFileContentFromModal = (fileTypes = []) => {\n  const openPanel = NSOpenPanel.openPanel()\n\n  openPanel.setTitle('Choose a JSON File')\n  openPanel.canCreateDirectories = false\n  openPanel.canChooseFiles = true\n  openPanel.allowedFileTypes = fileTypes\n\n  const openPanelButtonPressed = openPanel.runModal()\n  if (openPanelButtonPressed === NSModalResponseOK) {\n    const filePath = openPanel.URL().path()\n    return NSString.stringWithContentsOfFile_encoding_error(filePath, NSUTF8StringEncoding, nil)\n  }\n\n  return ''\n}\n\n/**\n * getSavePathFromModal 获取文件的存储路径\n * @param {String} fileName 文件名\n * @param {Array<string>} fileTypes 文件类型\n */\nexport const getSavePathFromModal = (fileName, fileTypes = ['json']) => {\n  if (!fileName) return\n  const savePanel = NSSavePanel.savePanel()\n  savePanel.canCreateDirectories = true\n  savePanel.nameFieldStringValue = fileName\n  savePanel.allowedFileTypes = fileTypes\n\n  const savePanelActionStatus = savePanel.runModal()\n  if (savePanelActionStatus === NSModalResponseOK) {\n    const filePath = savePanel.URL().path()\n    return {\n      filePath,\n      fileName: savePanel.nameFieldStringValue(),\n    }\n  }\n\n  return false\n}\n\n/**\n * observerWindowResizeNotification 监听窗口resize\n * @param {*} fn\n */\nexport const observerWindowResizeNotification = fn => {\n  // Keep script around, otherwise everything will be dumped once its run\n  // COScript.currentCOScript().setShouldKeepAround(true)\n\n  if (!getThreadDictForKey(WINDOW_MOVE_INSTANCE)) {\n    // Create a selector\n    const Selector = NSSelectorFromString('onWindowMove:')\n\n    const delegate = new MochaJSDelegate({\n      'onWindowMove:': notification => {\n        // const bounds = NSScreen.mainScreen().frame()\n        fn(notification)\n        // log(notification)\n        // NSNotificationCenter.defaultCenter().removeObserver_name_object(delegateInstance, NSWindowDidResizeNotification, nil)\n      }\n    })\n\n    // Don't forget to create a class instance of the delegate\n    const delegateInstance = delegate.getClassInstance()\n\n    NSNotificationCenter\n      .defaultCenter()\n      .addObserver_selector_name_object(delegateInstance, Selector, NSWindowDidResizeNotification, nil)\n\n    setThreadDictForKey(WINDOW_MOVE_INSTANCE, delegateInstance)\n    setThreadDictForKey(WINDOW_MOVE_SELECTOR, Selector)\n  }\n}\n\n/**\n * removeObserverWindowResizeNotification 清除监听窗口resize\n * @param {*} fn\n */\nexport const removeObserverWindowResizeNotification = () => {\n  const delegateInstance = getThreadDictForKey(WINDOW_MOVE_INSTANCE)\n  if (delegateInstance) {\n    NSNotificationCenter.defaultCenter().removeObserver_name_object(delegateInstance, NSWindowDidResizeNotification, nil)\n    removeThreadDictForKey(WINDOW_MOVE_INSTANCE)\n    removeThreadDictForKey(WINDOW_MOVE_SELECTOR)\n  }\n}\n","module.exports = require(\"sketch\");"],"sourceRoot":""}